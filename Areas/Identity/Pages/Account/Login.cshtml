@page
@model star_events.Areas.Identity.Pages.Account.LoginModel
@{
    ViewData["Title"] = "Login - TixWave";
    Layout = "_AuthLayout";
    ViewData["OverlayTitle"] = "Find Your Sweet Spot";
    ViewData["OverlaySubtitle"] = "Fast, easy, and secure ticket booking at your fingertips.";
}

<!-- Form Header -->
<div class="form-header">
    <h1 class="form-title">Welcome Back!</h1>
    <p class="form-subtitle">Sign in to your TixWave account</p>
</div>

<!-- Display Server Messages -->
@if (!ViewData.ModelState.IsValid)
{
    <div class="alert alert-danger">
        <i class='bx bx-error-circle'></i>
        @Html.ValidationSummary(false, "Please correct the following errors:")
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        <i class='bx bx-error-circle'></i>
        @TempData["ErrorMessage"]
    </div>
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        <i class='bx bx-check-circle'></i>
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["InfoMessage"] != null)
{
    <div class="alert alert-info">
        <i class='bx bx-info-circle'></i>
        @TempData["InfoMessage"]
    </div>
}

<!-- Login Form -->
<form id="account" method="post" asp-route-returnUrl="@Model.ReturnUrl">
    @Html.AntiForgeryToken()

    <!-- Username Field -->
    <div class="form-group">
        @Html.LabelFor(m => m.Input.Username, new { @class = "form-label" })
        <div class="position-relative">
            <i class='bx bx-user input-icon'></i>
            @Html.TextBoxFor(m => m.Input.Username, new {
                @class = "form-control",
                @placeholder = "Enter your username or email",
                @autocomplete = "username",
                @required = "required"
            })
        </div>
        @Html.ValidationMessageFor(m => m.Input.Username, "", new { @class = "text-danger" })
    </div>

    <!-- Password Field -->
    <div class="form-group">
        @Html.LabelFor(m => m.Input.Password, new { @class = "form-label" })
        <div class="position-relative">
            <i class='bx bx-lock-alt input-icon'></i>
            @Html.PasswordFor(m => m.Input.Password, new {
                @class = "form-control",
                @placeholder = "Enter your password",
                @autocomplete = "current-password",
                @required = "required"
            })
            <button type="button" class="password-toggle" title="Show password">
                <i class='bx bx-hide'></i>
            </button>
        </div>
        @Html.ValidationMessageFor(m => m.Input.Password, "", new { @class = "text-danger" })
    </div>

    <!-- Remember Me & Forgot Password -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="form-check">
            @Html.CheckBoxFor(m => m.Input.RememberMe, new { @class = "form-check-input" })
            @Html.LabelFor(m => m.Input.RememberMe, new { @class = "form-check-label" })
        </div>
        <a id="forgot-password" asp-page="./ForgotPassword" class="text-decoration-none">
            Forgot Password?
        </a>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="submit-btn">
        <i class='bx bx-log-in'></i>
        Sign In
    </button>
</form>

<div class="form-links">
    <span>Don't have an account?</span>
    <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl">Create Account</a>
</div>

@section OverlayFeatures {
    <li>
        <i class='bx bx-check'></i>
        <span>Instant booking confirmation</span>
    </li>
    <li>
        <i class='bx bx-check'></i>
        <span>Secure payment processing</span>
    </li>
    <li>
        <i class='bx bx-check'></i>
        <span>24/7 customer support</span>
    </li>
}